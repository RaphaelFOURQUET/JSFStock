<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta charset="utf-8" />
	<title>Passer commande</title>
	<h:outputStylesheet library="default" name="stocks.css" />
	<img src="resources/img/LogoJSF.png" />
</h:head>
<h:body>
	<h:form>
		<fieldset>
			<legend>Commande en cours</legend>

			<h:outputLabel for="categorie">Catégorie:<span
					class="requis" id="categorieOut"/>
				<f:ajax event="blur" />
			</h:outputLabel>

			<h:selectOneMenu value="#{commandeBean.categorie.libelle}" id="categorie">
				<f:selectItems value="#{commandeBean.categories}" var="cat" itemValue="#{cat.libelle}" itemLabel="#{cat.libelle}"/>
				<f:ajax event="change"
					render="categorieIn tableCategories" />
				<!-- <f:attribute name="composantCategorie" value="#{composantCategorie}"/> -->
			</h:selectOneMenu>

			<!-- <h:inputText id="categorieIn"
				value="#{commandeBean.categorie.libelle}" />
			<br /> -->

			<!-- Afficher articles correspondant à catégorie -->
			<h:dataTable value="#{commandeBean.articlesByCategorie}" var="article"
				cellspacing="4" id="tableCategories">
<!-- 				<h:column>
					<h:outputText value="#{commandeBean.articleCourant}"/>
					<h:inputText disabled="true"
				value="#{article.designation}" />
				</h:column> -->
				<h:column>
					<f:facet name="header">
						<h:outputText value="Nom" />
					</f:facet>
					<h:outputText value="#{article.designation}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Description" />
					</f:facet>
					<h:outputText value="#{article.description}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Prix" />
					</f:facet>
					<h:outputText value="#{article.prixUnitaire}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Qtite" />
					</f:facet>
					<h:inputText value="#{article.qteVoulue}" >
						<f:ajax event="change"
					render="tableCategories" />
					</h:inputText>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Prix Total" />
					</f:facet>
					<h:outputText value="#{commandeBean.prixTotal}" />
				</h:column>
				<!-- <h:column>
					<f:facet name="header">
						<h:outputText value="Ajouter" />
					</f:facet>
					<h:selectBooleanCheckbox />
				</h:column> -->
			</h:dataTable>
			
		</fieldset>
	</h:form>
	TODO montant total.
	<br />
	<a href="vueCommande.xhtml">Valider</a>
</h:body>
</html>